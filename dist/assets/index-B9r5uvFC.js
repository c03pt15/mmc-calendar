import{r as Ye,a as Ae,b as ht}from"./vendor-YmKVTMpv.js";import{c as yt}from"./supabase-8PGa67XW.js";(function(){const D=document.createElement("link").relList;if(D&&D.supports&&D.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))R(p);new MutationObserver(p=>{for(const n of p)if(n.type==="childList")for(const m of n.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&R(m)}).observe(document,{childList:!0,subtree:!0});function k(p){const n={};return p.integrity&&(n.integrity=p.integrity),p.referrerPolicy&&(n.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?n.credentials="include":p.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function R(p){if(p.ep)return;p.ep=!0;const n=k(p);fetch(p.href,n)}})();var be={exports:{}},oe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ee;function pt(){if(Ee)return oe;Ee=1;var d=Ye(),D=Symbol.for("react.element"),k=Symbol.for("react.fragment"),R=Object.prototype.hasOwnProperty,p=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function m(M,_,C){var l,v={},V=null,c=null;C!==void 0&&(V=""+C),_.key!==void 0&&(V=""+_.key),_.ref!==void 0&&(c=_.ref);for(l in _)R.call(_,l)&&!n.hasOwnProperty(l)&&(v[l]=_[l]);if(M&&M.defaultProps)for(l in _=M.defaultProps,_)v[l]===void 0&&(v[l]=_[l]);return{$$typeof:D,type:M,key:V,ref:c,props:v,_owner:p.current}}return oe.Fragment=k,oe.jsx=m,oe.jsxs=m,oe}var Fe;function bt(){return Fe||(Fe=1,be.exports=pt()),be.exports}var e=bt(),y=Ye();const ft=Ae(y);var xe={},$e;function vt(){if($e)return xe;$e=1;var d=ht();return xe.createRoot=d.createRoot,xe.hydrateRoot=d.hydrateRoot,xe}var jt=vt();const _t=Ae(jt);var wt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Nt=d=>d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),I=(d,D)=>{const k=y.forwardRef(({color:R="currentColor",size:p=24,strokeWidth:n=2,absoluteStrokeWidth:m,children:M,..._},C)=>y.createElement("svg",{ref:C,...wt,width:p,height:p,stroke:R,strokeWidth:m?Number(n)*24/Number(p):n,className:`lucide lucide-${Nt(d)}`,..._},[...D.map(([l,v])=>y.createElement(l,v)),...(Array.isArray(M)?M:[M])||[]]));return k.displayName=`${d}`,k},Re=I("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Dt=I("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),kt=I("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Oe=I("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Mt=I("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Ct=I("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ie=I("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),Tt=I("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),St=I("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Le=I("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),he=I("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Et="https://zmbptzxjuuveqmcevtaz.supabase.co",Ft="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InptYnB0enhqdXV2ZXFtY2V2dGF6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzMDU0MzcsImV4cCI6MjA2ODg4MTQzN30.Q48N5K21lLF0iB3Hr_YNwP6J6qq5jHROOda1yLuGAos",S=yt(Et,Ft),$t=(d,D,k,R)=>{const p=[];return d.forEach(n=>{try{if(!n||typeof n!="object"||n.is_deleted_instance||n.status==="deleted"||n.is_modified_instance)return;if(!n.is_recurring||!n.recurring_pattern){n.month===D&&n.year===k&&p.push(n);return}const m=new Date(n.year,n.month,n.date),M=n.recurring_end_date?new Date(n.recurring_end_date):new Date(m.getFullYear()+1,m.getMonth(),m.getDate()),_=new Date(k,D,1),C=new Date(k,D+1,0);if(m<=C&&M>=_){let l=new Date(m),v=0;const V=n.recurring_end_date?12:1e3;for(;l<=M&&v<V;){if(l.getMonth()===D&&l.getFullYear()===k){const o=`${n.id}_${l.getFullYear()}_${l.getMonth()}_${l.getDate()}`;if(R.has(o)){let a;const b=n.recurring_interval&&typeof n.recurring_interval=="number"?n.recurring_interval:1,w=n.recurring_unit&&typeof n.recurring_unit=="string"?n.recurring_unit:"week";switch(n.recurring_pattern){case"daily":a=new Date(l),a.setDate(l.getDate()+b);break;case"weekly":a=new Date(l),a.setDate(l.getDate()+7*b);break;case"monthly":a=new Date(l),a.setMonth(l.getMonth()+b);break;case"yearly":a=new Date(l),a.setFullYear(l.getFullYear()+b);break;case"weekdays":a=new Date(l),a.setDate(l.getDate()+1);break;case"custom_days":n.recurring_days&&n.recurring_days.length>0?(a=new Date(l),a.setDate(l.getDate()+1)):(a=new Date(l),a.setDate(l.getDate()+1));break;case"1st_day_of_month":a=new Date(l),a.setMonth(l.getMonth()+b);const N=new Date(a.getFullYear(),a.getMonth(),1),W=N.getDay(),J=((n.recurring_days&&n.recurring_days[0]!==void 0?n.recurring_days[0]:1)-W+7)%7;a=new Date(N),a.setDate(N.getDate()+J);break;case"2nd_day_of_month":a=new Date(l),a.setMonth(l.getMonth()+b);const F=new Date(a.getFullYear(),a.getMonth(),1),P=F.getDay(),O=((n.recurring_days&&n.recurring_days[0]!==void 0?n.recurring_days[0]:1)-P+7)%7;a=new Date(F),a.setDate(F.getDate()+O+7);break;case"3rd_day_of_month":a=new Date(l),a.setMonth(l.getMonth()+b);const Y=new Date(a.getFullYear(),a.getMonth(),1),U=Y.getDay(),q=((n.recurring_days&&n.recurring_days[0]!==void 0?n.recurring_days[0]:1)-U+7)%7;a=new Date(Y),a.setDate(Y.getDate()+q+14);break;case"4th_day_of_month":a=new Date(l),a.setMonth(l.getMonth()+b);const T=new Date(a.getFullYear(),a.getMonth(),1),X=T.getDay(),Q=((n.recurring_days&&n.recurring_days[0]!==void 0?n.recurring_days[0]:1)-X+7)%7;a=new Date(T),a.setDate(T.getDate()+Q+21);break;case"last_day_of_month":a=new Date(l),a.setMonth(l.getMonth()+b);const $=new Date(a.getFullYear(),a.getMonth()+1,0),Z=$.getDay(),z=n.recurring_days&&n.recurring_days[0]!==void 0?n.recurring_days[0]:1,re=(Z-z+7)%7;a=new Date($),a.setDate($.getDate()-re);break;default:a=new Date(l),a.setDate(l.getDate()+1)}l=a,v++;continue}if(d.some(a=>a.is_deleted_instance&&a.parent_task_id===n.id&&a.instance_key===o)){let a;const b=n.recurring_interval&&typeof n.recurring_interval=="number"?n.recurring_interval:1,w=n.recurring_unit&&typeof n.recurring_unit=="string"?n.recurring_unit:"week";switch(n.recurring_pattern){case"daily":a=new Date(l),a.setDate(l.getDate()+b);break;case"weekly":a=new Date(l),a.setDate(l.getDate()+7*b);break;case"monthly":a=new Date(l),a.setMonth(l.getMonth()+b);break;case"yearly":a=new Date(l),a.setFullYear(l.getFullYear()+b);break;case"weekdays":a=new Date(l),a.setDate(l.getDate()+1);break;case"custom_days":n.recurring_days&&n.recurring_days.length>0?(a=new Date(l),a.setDate(l.getDate()+1)):(a=new Date(l),a.setDate(l.getDate()+1));break;case"1st_day_of_month":a=new Date(l),a.setMonth(l.getMonth()+b);const N=new Date(a.getFullYear(),a.getMonth(),1),W=N.getDay(),J=((n.recurring_days&&n.recurring_days[0]!==void 0?n.recurring_days[0]:1)-W+7)%7;a=new Date(N),a.setDate(N.getDate()+J);break;case"2nd_day_of_month":a=new Date(l),a.setMonth(l.getMonth()+b);const F=new Date(a.getFullYear(),a.getMonth(),1),P=F.getDay(),O=((n.recurring_days&&n.recurring_days[0]!==void 0?n.recurring_days[0]:1)-P+7)%7;a=new Date(F),a.setDate(F.getDate()+O+7);break;case"3rd_day_of_month":a=new Date(l),a.setMonth(l.getMonth()+b);const Y=new Date(a.getFullYear(),a.getMonth(),1),U=Y.getDay(),q=((n.recurring_days&&n.recurring_days[0]!==void 0?n.recurring_days[0]:1)-U+7)%7;a=new Date(Y),a.setDate(Y.getDate()+q+14);break;case"4th_day_of_month":a=new Date(l),a.setMonth(l.getMonth()+b);const T=new Date(a.getFullYear(),a.getMonth(),1),X=T.getDay(),Q=((n.recurring_days&&n.recurring_days[0]!==void 0?n.recurring_days[0]:1)-X+7)%7;a=new Date(T),a.setDate(T.getDate()+Q+21);break;case"last_day_of_month":a=new Date(l),a.setMonth(l.getMonth()+b);const $=new Date(a.getFullYear(),a.getMonth()+1,0),Z=$.getDay(),z=n.recurring_days&&n.recurring_days[0]!==void 0?n.recurring_days[0]:1,re=(Z-z+7)%7;a=new Date($),a.setDate($.getDate()-re);break;default:a=new Date(l),a.setDate(l.getDate()+1)}l=a,v++;continue}const E=d.find(a=>a.is_modified_instance&&a.parent_task_id===n.id&&a.instance_key===o);if(E){const a={...E,date:l.getDate(),month:l.getMonth(),year:l.getFullYear(),parent_task_id:n.id,is_recurring:!0,is_recurring_instance:!0,instance_key:o};p.push(a)}else{const a={...n,id:n.id,date:l.getDate(),month:l.getMonth(),year:l.getFullYear(),parent_task_id:n.id,is_recurring:!0,is_recurring_instance:!0,instance_key:o};p.push(a)}}let c;const i=n.recurring_interval&&typeof n.recurring_interval=="number"?n.recurring_interval:1;switch(n.recurring_unit&&typeof n.recurring_unit=="string"?n.recurring_unit:"week"){case"day":c=new Date(l),c.setDate(l.getDate()+i);break;case"week":c=new Date(l),c.setDate(l.getDate()+7*i);break;case"month":c=new Date(l),c.setMonth(l.getMonth()+i);break;case"year":c=new Date(l),c.setFullYear(l.getFullYear()+i);break;case"first_day_of_month":c=new Date(l),c.setMonth(l.getMonth()+i);const o=new Date(c.getFullYear(),c.getMonth(),1),f=o.getDay(),a=((n.recurring_days&&n.recurring_days[0]!==void 0?n.recurring_days[0]:1)-f+7)%7;c=new Date(o),c.setDate(o.getDate()+a);break;case"2nd_day_of_month":c=new Date(l),c.setMonth(l.getMonth()+i);const b=new Date(c.getFullYear(),c.getMonth(),1),w=b.getDay(),W=((n.recurring_days&&n.recurring_days[0]!==void 0?n.recurring_days[0]:1)-w+7)%7;c=new Date(b),c.setDate(b.getDate()+W+7);break;case"3rd_day_of_month":c=new Date(l),c.setMonth(l.getMonth()+i);const L=new Date(c.getFullYear(),c.getMonth(),1),J=L.getDay(),P=((n.recurring_days&&n.recurring_days[0]!==void 0?n.recurring_days[0]:1)-J+7)%7;c=new Date(L),c.setDate(L.getDate()+P+14);break;case"4th_day_of_month":c=new Date(l),c.setMonth(l.getMonth()+i);const K=new Date(c.getFullYear(),c.getMonth(),1),O=K.getDay(),U=((n.recurring_days&&n.recurring_days[0]!==void 0?n.recurring_days[0]:1)-O+7)%7;c=new Date(K),c.setDate(K.getDate()+U+21);break;case"last_day_of_month":c=new Date(l),c.setMonth(l.getMonth()+i);const B=new Date(c.getFullYear(),c.getMonth()+1,0),q=B.getDay(),T=n.recurring_days&&n.recurring_days[0]!==void 0?n.recurring_days[0]:1,X=(q-T+7)%7;c=new Date(B),c.setDate(B.getDate()-X);break;default:c=new Date(l),c.setDate(l.getDate()+1)}l=c,v++}}}catch(m){console.error("Error processing task in generateRecurringInstances:",m,n)}}),p},Rt=()=>{const[d,D]=y.useState(new Date),[k,R]=y.useState("Calendar"),[p,n]=y.useState({blogPosts:!0,socialMedia:!0,campaigns:!0,emailMarketing:!0}),[m,M]=y.useState(null),[_,C]=y.useState(!1),[l,v]=y.useState(!1),[V,c]=y.useState(!1),[i,ne]=y.useState(null),[o,f]=y.useState(null),[E,a]=y.useState(null),[b,w]=y.useState(!1),[N,W]=y.useState({}),[L,J]=y.useState(""),[F,P]=y.useState([]),[K,O]=y.useState(!1),[Y,U]=y.useState(null),[B,q]=y.useState(!1),[T,X]=y.useState([]),[ce,Q]=y.useState(!1),[$,Z]=y.useState(""),[z,re]=y.useState(null),[fe,ve]=y.useState(new Set),[ye,de]=y.useState("single"),[x,j]=y.useState({title:"",description:"",type:"Blog",category:"blogPosts",date:1,month:d.getMonth(),year:d.getFullYear(),time:"09:00",assignee:1,status:"planned",priority:"medium",is_recurring:!1,recurring_pattern:"",recurring_interval:1,recurring_unit:"week",recurring_days:[],recurring_end_date:null,comments:"",tags:[],created_by:1}),A=[{id:1,name:"Courtney Wright",role:"Social and Digital Engagement Lead",avatar:"CW",color:"bg-blue-500",active:!0},{id:2,name:"Ghislain Girard",role:"Manager, Web Operations",avatar:"GG",color:"bg-green-500",active:!0},{id:3,name:"Joy Pavelich",role:"Executive Vice-President, Strategy and Operations",avatar:"JP",color:"bg-purple-500",active:!0},{id:4,name:"Krystle Kung",role:"Manager, Digital Marketing",avatar:"KK",color:"bg-pink-500",active:!0},{id:5,name:"Lori-Anne Thibault",role:"Bilingual Communications Specialist",avatar:"LT",color:"bg-indigo-500",active:!0},{id:6,name:"Meg McLean",role:"Social and Digital Engagement Lead",avatar:"MM",color:"bg-red-500",active:!0}],ue={blogPosts:{color:"bg-blue-100 text-blue-800 border-blue-200",type:"Blog"},socialMedia:{color:"bg-green-100 text-green-800 border-green-200",type:"Social"},campaigns:{color:"bg-purple-100 text-purple-800 border-purple-200",type:"Campaign"},emailMarketing:{color:"bg-orange-100 text-orange-800 border-orange-200",type:"Email"}},le={high:{color:"bg-red-100 text-red-800 border-red-200",icon:"🔴",label:"High"},medium:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:"🟡",label:"Medium"},low:{color:"bg-green-100 text-green-800 border-green-200",icon:"🟢",label:"Low"}},ee=["January","February","March","April","May","June","July","August","September","October","November","December"],Pe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],je=`${d.getFullYear()}-${d.getMonth()}`;N[je],y.useEffect(()=>{(async()=>{try{w(!0);const{data:r,error:s}=await S.from("tasks").select("*").eq("year",d.getFullYear()).eq("month",d.getMonth());if(s){console.error("Error fetching tasks:",s),alert(`Error loading tasks: ${s.message}`);return}console.log("Tasks fetched successfully:",r),W(u=>({...u,[je]:r||[]}))}catch(r){console.error("Unexpected error fetching tasks:",r),alert(`Unexpected error: ${r}`)}finally{w(!1)}})()},[d]);const se=async()=>{try{const{data:t,error:r}=await S.from("tasks").select("*");if(r){console.error("Error refreshing tasks:",r);return}const s={};(t||[]).forEach(g=>{const h=`${g.year}-${g.month}`;s[h]||(s[h]=[]),s[h].push(g)}),W(s);const u=new Set;(t||[]).forEach(g=>{g.is_deleted_instance&&g.instance_key&&u.add(g.instance_key)}),ve(u)}catch(t){console.error("Unexpected error refreshing tasks:",t)}},Ue=t=>{const r=t.getFullYear(),s=t.getMonth(),u=new Date(r,s,1),h=new Date(r,s+1,0).getDate(),H=u.getDay(),ie=[];for(let ae=0;ae<H;ae++)ie.push(null);for(let ae=1;ae<=h;ae++)ie.push(ae);return ie},_e=(t,r)=>new Date(t,r+1,0).getDate(),qe=y.useMemo(()=>Object.values(N).flat().filter(t=>!t.is_modified_instance&&!t.is_deleted_instance&&t.status!=="deleted"),[N]),G=y.useMemo(()=>{try{const t=Object.values(N).flat();return $t(t,d.getMonth(),d.getFullYear(),fe)}catch(t){return console.error("Error generating recurring instances:",t),qe||[]}},[N,d.getMonth(),d.getFullYear(),fe]),We=y.useCallback(t=>{let r=G.filter(s=>s.date===t&&p[s.category]&&s.status!=="deleted");return m&&(r=r.filter(s=>s.assignee===m)),r.sort((s,u)=>s.time&&u.time?s.time.localeCompare(u.time):s.time&&!u.time?-1:!s.time&&u.time?1:0)},[G,p,m]),we=y.useCallback(()=>{let t=G.filter(r=>p[r.category]&&r.status!=="deleted");return m&&(t=t.filter(r=>r.assignee===m)),t},[G,p,m]),ge={blogPosts:G.filter(t=>t.category==="blogPosts"&&t.status!=="deleted"&&(!m||t.assignee===m)).length,socialMedia:G.filter(t=>t.category==="socialMedia"&&t.status!=="deleted"&&(!m||t.assignee===m)).length,campaigns:G.filter(t=>t.category==="campaigns"&&t.status!=="deleted"&&(!m||t.assignee===m)).length,emailMarketing:G.filter(t=>t.category==="emailMarketing"&&t.status!=="deleted"&&(!m||t.assignee===m)).length},Ne=we(),me=Ne.filter(t=>t.month===d.getMonth()&&t.year===d.getFullYear()),Je=me.filter(t=>t.status==="planned").length,Ke=me.filter(t=>t.status==="in-progress").length,Be=me.filter(t=>t.status==="review").length,ze=me.filter(t=>t.status==="completed").length,Ge=t=>{n(r=>({...r,[t]:!r[t]}))},He=t=>{M(m===t?null:t)},Ve=()=>{re(null),j({title:"",description:"",type:"Blog",category:"",date:1,month:d.getMonth(),year:d.getFullYear(),time:"09:00",assignee:null,status:"planned",priority:"medium",comments:"",tags:[],created_by:null}),C(!0)},Xe=t=>{re({date:t,month:d.getMonth(),year:d.getFullYear()}),j({title:"",description:"",type:"Blog",category:"",date:t,month:d.getMonth(),year:d.getFullYear(),time:"09:00",assignee:null,status:"planned",priority:"medium",comments:"",tags:[],created_by:null}),C(!0)},De=t=>{ne(t),v(!0)},Qe=async()=>{try{if(w(!0),!x.category){alert("Please select a category");return}if(!x.assignee){alert("Please select an assignee");return}if(!x.created_by){alert("Please select who created this task");return}const t={...x,color:ue[x.category].color,created_by:x.created_by},{data:r,error:s}=await S.from("tasks").insert([t]);if(s){console.error("Error saving task:",s),alert(`Error saving task: ${s.message}`);return}console.log("Task saved successfully:",r),C(!1),await se()}catch(t){console.error("Unexpected error:",t),alert(`Unexpected error: ${t}`)}finally{w(!1)}},Ze=()=>{f({...i}),de("single"),v(!1),c(!0)},et=async()=>{try{w(!0);const t=i.is_recurring_instance?i.parent_task_id:i.id,{data:r,error:s}=await S.from("tasks").select("*").eq("id",t).single();if(s){console.error("Error fetching recurring task:",s),alert(`Error loading recurring task: ${s.message}`);return}f(r),de("all"),v(!1),c(!0)}catch(t){console.error("Unexpected error:",t),alert(`Unexpected error: ${t}`)}finally{w(!1)}},tt=()=>{const t=new Date;j({title:i.title+" (Copy)",description:i.description,type:i.type,category:i.category,date:t.getDate(),month:t.getMonth(),year:t.getFullYear(),time:i.time,assignee:i.assignee,status:"planned",color:""}),v(!1),C(!0)},rt=t=>{if(J(t),t.trim()===""){P([]),O(!1);return}const s=Object.values(N).flat().filter(u=>u.title.toLowerCase().includes(t.toLowerCase())||u.description.toLowerCase().includes(t.toLowerCase())||u.type.toLowerCase().includes(t.toLowerCase())||te(u.assignee).toLowerCase().includes(t.toLowerCase()));P(s),O(!0)},st=t=>{ne(t),v(!0),J(""),P([]),O(!1)},at=()=>{const t=Object.values(N).flat(),r=[["Title","Description","Type","Category","Date","Month","Year","Time","Assignee","Status","Priority"],...t.map(h=>[h.title,h.description,h.type,h.category,h.date,h.month+1,h.year,h.time||"",te(h.assignee),h.status,h.priority||"medium"])].map(h=>h.map(H=>`"${H}"`).join(",")).join(`
`),s=new Blob([r],{type:"text/csv"}),u=window.URL.createObjectURL(s),g=document.createElement("a");g.href=u,g.download=`mmc-calendar-${d.getFullYear()}-${d.getMonth()+1}.csv`,g.click(),window.URL.revokeObjectURL(u)},ke=()=>{$.trim()&&!T.includes($.trim())&&(X([...T,$.trim()]),Z(""),Q(!1))};y.useEffect(()=>{const t=r=>{const s=r.target;s.closest(".search-container")||O(!1),s.closest(".export-container")||q(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]);const nt=async()=>{try{w(!0);const t={...o,color:ue[o.category].color};if((o.is_recurring||o.is_recurring_instance)&&ye==="single"){const s=o.instance_key||`${o.parent_task_id||o.id}_${o.year}_${o.month}_${o.date}`,u={...t,parent_task_id:o.parent_task_id||o.id,instance_key:s,is_recurring:!1,is_recurring_instance:!0,is_modified_instance:!0};delete u.id;const{data:g}=await S.from("tasks").select("id").eq("parent_task_id",u.parent_task_id).eq("instance_key",s).eq("is_modified_instance",!0).single();if(g){const{error:h}=await S.from("tasks").update(u).eq("id",g.id);if(h){console.error("Error updating modified instance:",h),alert(`Error updating task: ${h.message}`);return}}else{const{error:h}=await S.from("tasks").insert([u]);if(h){console.error("Error creating modified instance:",h),alert(`Error updating task: ${h.message}`);return}}}else{const s=o.is_recurring_instance?o.parent_task_id:o.id,{data:u,error:g}=await S.from("tasks").update(t).eq("id",s);if(g){console.error("Error updating task:",g),alert(`Error updating task: ${g.message}`);return}}console.log("Task updated successfully"),c(!1),f(null),await se()}catch(t){console.error("Unexpected error:",t),alert(`Unexpected error: ${t}`)}finally{w(!1)}},pe=async(t=!1)=>{if(i.is_recurring||i.is_recurring_instance){const s=t?"Are you sure you want to delete ALL occurrences of this recurring task?":"Are you sure you want to delete this single occurrence?";if(window.confirm(s))try{w(!0);let u;if(t){const g=i.is_recurring_instance?i.parent_task_id:i.id,h=await S.from("tasks").delete().eq("id",g);if(u=h.data,h.error){console.error("Error deleting recurring task:",h.error),alert(`Error deleting recurring task: ${h.error.message}`);return}}else{const g=i.instance_key||`${i.parent_task_id||i.id}_${i.year}_${i.month}_${i.date}`,h={title:`[DELETED] ${i.title}`,description:i.description,type:i.type,category:i.category,date:i.date,month:i.month,year:i.year,time:i.time,assignee:i.assignee,status:"deleted",color:i.color,priority:i.priority,is_recurring:!1,parent_task_id:i.parent_task_id||i.id,instance_key:g,is_recurring_instance:!0,is_deleted_instance:!0},H=await S.from("tasks").insert([h]);if(u=H.data,H.error){console.error("Error marking instance as deleted:",H.error),alert(`Error deleting task instance: ${H.error.message}`);return}ve(ie=>new Set([...ie,g]))}console.log("Task deleted successfully:",u),v(!1),ne(null),await se()}catch(u){console.error("Unexpected error:",u),alert(`Unexpected error: ${u}`)}finally{w(!1)}}else if(window.confirm("Are you sure you want to delete this task?"))try{w(!0);const s=await S.from("tasks").delete().eq("id",i.id);if(s.error){console.error("Error deleting task:",s.error),alert(`Error deleting task: ${s.error.message}`);return}console.log("Task deleted successfully:",s.data),v(!1),ne(null),await se()}catch(s){console.error("Unexpected error:",s),alert(`Unexpected error: ${s}`)}finally{w(!1)}},lt=(t,r)=>{a(r),t.dataTransfer.effectAllowed="move"},it=t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"},ot=async(t,r)=>{t.preventDefault(),E&&E.status!==r&&(await S.from("tasks").update({status:r}).eq("id",E.id),await se()),a(null)},ct=(t,r)=>{a(r),t.dataTransfer.effectAllowed="move"},dt=(t,r)=>{t.preventDefault(),t.dataTransfer.dropEffect="move",U(r)},ut=()=>{U(null)},gt=async(t,r)=>{if(t.preventDefault(),E&&E.date!==r){const s=d.getMonth(),u=d.getFullYear(),g=new Date(u,s+1,0).getDate();r<=g&&(await S.from("tasks").update({date:r,month:s,year:u}).eq("id",E.id),await se())}a(null),U(null)},te=t=>A.find(r=>r.id===t)?.name||"Unknown",mt=Ue(d),Me=new Date().getDate(),Ce=d.getMonth()===new Date().getMonth()&&d.getFullYear()===new Date().getFullYear(),xt=[{id:"planned",title:"Planned",color:"bg-green-50"},{id:"in-progress",title:"In Progress",color:"bg-yellow-50"},{id:"review",title:"Review",color:"bg-orange-50"},{id:"completed",title:"Completed",color:"bg-blue-50"}],Te=t=>we().filter(s=>s.status===t),Se=t=>{D(r=>{const s=new Date(r);return s.setMonth(r.getMonth()+t),s})};return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 p-4",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx("img",{src:"/mmc-calendar/atlas-logo.png",alt:"Atlas Logo",className:"w-full h-full object-contain"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"MMC Calendar"})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Monthly Overview"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:Je}),e.jsx("div",{className:"text-xs text-gray-600",children:"Upcoming"})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Ke}),e.jsx("div",{className:"text-xs text-gray-600",children:"In Progress"})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:Be}),e.jsx("div",{className:"text-xs text-gray-600",children:"Under Review"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ze}),e.jsx("div",{className:"text-xs text-gray-600",children:"Completed"})]})]})]}),m&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(St,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-800",children:A.find(t=>t.id===m)?.name})]}),e.jsx("button",{onClick:()=>M(null),className:"text-blue-600 hover:text-blue-800",children:e.jsx(he,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Filters"}),e.jsx("div",{className:"space-y-2",children:[{key:"blogPosts",label:"Blog Posts",count:ge.blogPosts},{key:"socialMedia",label:"Social Media",count:ge.socialMedia},{key:"campaigns",label:"Campaigns",count:ge.campaigns},{key:"emailMarketing",label:"Email Marketing",count:ge.emailMarketing}].map(t=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p[t.key],onChange:()=>Ge(t.key),className:"rounded border-gray-300"}),e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${t.key==="blogPosts"?"bg-blue-500":t.key==="socialMedia"?"bg-green-500":t.key==="campaigns"?"bg-purple-500":"bg-orange-500"}`}),e.jsx("span",{className:"text-sm text-gray-700",children:t.label})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${t.key==="blogPosts"?"bg-blue-100 text-blue-800":t.key==="socialMedia"?"bg-green-100 text-green-800":t.key==="campaigns"?"bg-purple-100 text-purple-800":"bg-orange-100 text-orange-800"}`,children:t.count})]},t.key))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Team Members"}),e.jsx("div",{className:"space-y-3",children:A.map(t=>e.jsxs("div",{className:`flex items-center space-x-3 cursor-pointer p-2 rounded-lg hover:bg-gray-50 ${m===t.id?"bg-blue-50 border border-blue-200":""}`,onClick:()=>He(t.id),children:[e.jsx("div",{className:`w-8 h-8 ${t.color} rounded-full flex items-center justify-center text-white text-xs font-medium`,children:t.avatar}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:t.role})]}),t.active&&e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"})]},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Recent Activity"}),e.jsx("div",{className:"space-y-3",children:Ne.slice(0,3).map(t=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${t.status==="completed"?"bg-blue-500":t.status==="in-progress"?"bg-yellow-500":t.status==="review"?"bg-orange-500":"bg-green-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-900",children:t.title}),e.jsx("div",{className:"text-xs text-gray-500",children:t.status==="completed"?"completed":t.status==="in-progress"?"in progress":t.status==="review"?"ready for review":"planned"})]})]},t.id))})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Se(-1),className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(Dt,{className:"w-5 h-5"})}),e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:[ee[d.getMonth()]," ",d.getFullYear()]}),e.jsx("button",{onClick:()=>Se(1),className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(kt,{className:"w-5 h-5"})})]}),e.jsx("button",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-md hover:bg-blue-200",onClick:()=>D(new Date),children:"Today"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative search-container",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search tasks...",value:L,onChange:t=>rt(t.target.value),onFocus:()=>L&&O(!0),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-64"})]}),K&&F.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto",children:F.map(t=>e.jsxs("div",{onClick:()=>st(t),className:"p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.title}),e.jsx("div",{className:"text-sm text-gray-600 truncate",children:t.description}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${t.color}`,children:t.type}),e.jsxs("span",{className:"text-xs text-gray-500",children:[ee[t.month||d.getMonth()]," ",t.date,", ",t.year||d.getFullYear()]}),e.jsx("span",{className:"text-xs text-gray-500",children:te(t.assignee)})]})]},t.id))}),K&&F.length===0&&L&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 p-3",children:e.jsxs("div",{className:"text-gray-500 text-sm",children:['No tasks found matching "',L,'"']})})]}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{className:`px-3 py-1 text-sm rounded-md ${k==="Calendar"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,onClick:()=>R("Calendar"),children:"Calendar"}),e.jsx("button",{className:`px-3 py-1 text-sm rounded-md ${k==="Kanban"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,onClick:()=>R("Kanban"),children:"Kanban"})]}),e.jsxs("button",{className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",onClick:Ve,children:[e.jsx(Ct,{className:"w-4 h-4"}),e.jsx("span",{children:"New Entry"})]}),e.jsxs("div",{className:"relative export-container",children:[e.jsx("button",{onClick:()=>q(!B),className:"p-2 rounded-lg hover:bg-gray-100",title:"Export data",children:e.jsx(Mt,{className:"w-5 h-5"})}),B&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-50",children:e.jsx("div",{className:"py-1",children:e.jsx("button",{onClick:()=>{at(),q(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Export to CSV"})})})]})]})]})}),e.jsx("div",{className:"flex-1 p-6",children:b?e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Loading..."}):k==="Calendar"?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 h-full",children:[e.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200",children:Pe.map(t=>e.jsx("div",{className:"p-4 text-center text-sm font-medium text-gray-500 border-r border-gray-200 last:border-r-0",children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 flex-1",style:{gridTemplateRows:"repeat(6, 1fr)"},children:mt.map((t,r)=>e.jsx("div",{className:`border-r border-b border-gray-200 last:border-r-0 p-2 min-h-[120px] relative cursor-pointer hover:bg-gray-50 ${Y===t?"bg-blue-50 border-blue-300":""}`,onClick:t?()=>Xe(t):void 0,onDragOver:t?s=>dt(s,t):void 0,onDragLeave:t?ut:void 0,onDrop:t?s=>gt(s,t):void 0,children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`text-sm font-medium mb-2 ${t===Me&&Ce?"text-blue-600":"text-gray-900"}`,children:t}),e.jsx("div",{className:"space-y-1",children:We(t).map(s=>e.jsxs("div",{className:`text-xs p-2 rounded border ${s.color} cursor-move hover:shadow-sm relative ${s.status==="completed"?"opacity-75":""} ${E?.id===s.id?"opacity-50":""}`,onClick:u=>{u.stopPropagation(),De(s)},draggable:!0,onDragStart:u=>ct(u,s),children:[s.status==="completed"&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-full h-0.5 bg-gray-600 transform rotate-12"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`font-medium truncate ${s.status==="completed"?"text-gray-500":""}`,children:s.title}),e.jsxs("div",{className:"flex items-center space-x-1",children:[s.is_recurring&&e.jsx(Ie,{className:"w-3 h-3 text-blue-500",title:"Recurring task"}),s.priority&&s.priority!=="medium"&&e.jsx("span",{className:"text-xs ml-1",children:le[s.priority]?.icon||"🟡"})]})]}),e.jsx("div",{className:`${s.status==="completed"?"text-gray-400":"text-gray-600"}`,children:s.type}),s.time&&e.jsx("div",{className:`${s.status==="completed"?"text-gray-400":"text-gray-500"}`,children:s.time}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"absolute bottom-1 right-1 flex flex-wrap gap-1",children:[s.tags.slice(0,2).map((u,g)=>e.jsx("span",{className:"text-[10px] bg-gray-50 text-gray-600 px-1 py-0.5 rounded",children:u},g)),s.tags.length>2&&e.jsxs("span",{className:"text-[10px] text-gray-500",children:["+",s.tags.length-2]})]})]},s.id))}),t===Me&&Ce&&e.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-blue-500 rounded-full"})]})},r))})]}):e.jsx("div",{className:"h-full",children:e.jsx("div",{className:"grid grid-cols-4 gap-6 h-full",children:xt.map(t=>e.jsxs("div",{className:`${t.color} rounded-lg p-4`,onDragOver:it,onDrop:r=>ot(r,t.id),children:[e.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center justify-between",children:[t.title,e.jsx("span",{className:"text-sm bg-white px-2 py-1 rounded-full",children:Te(t.id).length})]}),e.jsx("div",{className:"space-y-3",children:Te(t.id).map(r=>e.jsxs("div",{className:`bg-white p-4 rounded-lg shadow-sm border cursor-move hover:shadow-md transition-shadow ${E?.id===r.id?"opacity-50":""}`,draggable:!0,onDragStart:s=>lt(s,r),onClick:()=>De(r),children:[e.jsxs("div",{className:"font-medium text-gray-900 mb-2 flex items-center space-x-2",children:[e.jsx("span",{children:r.title}),r.is_recurring&&e.jsx(Ie,{className:"w-4 h-4 text-blue-500",title:"Recurring task"})]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:r.description}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${r.color}`,children:r.type}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Re,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[ee[r.month||d.getMonth()]," ",r.date]})]})]}),r.time&&e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:r.time})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:`w-6 h-6 ${A.find(s=>s.id===r.assignee)?.color} rounded-full flex items-center justify-center text-white text-xs`,children:A.find(s=>s.id===r.assignee)?.avatar}),e.jsx("span",{className:"text-xs text-gray-600",children:te(r.assignee)})]}),r.tags&&r.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[r.tags.slice(0,3).map((s,u)=>e.jsx("span",{className:"text-[10px] bg-gray-50 text-gray-600 px-1.5 py-0.5 rounded",children:s},u)),r.tags.length>3&&e.jsxs("span",{className:"text-[10px] text-gray-500",children:["+",r.tags.length-3]})]})]},r.id))})]},t.id))})})})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-[800px] max-w-[95vw] mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["New Entry",z&&e.jsxs("span",{className:"text-sm text-blue-600 ml-2",children:["(for ",ee[z.month]," ",z.date,", ",z.year,")"]})]}),e.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(he,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:x.title,onChange:t=>j(r=>({...r,title:t.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter task title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:t=>j(r=>({...r,description:t.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter task description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Month"}),e.jsx("select",{value:x.month,onChange:t=>j(r=>({...r,month:parseInt(t.target.value)})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:ee.map((t,r)=>e.jsx("option",{value:r,children:t},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"}),e.jsx("input",{type:"number",value:x.year,onChange:t=>j(r=>({...r,year:parseInt(t.target.value)||new Date().getFullYear()})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2020",max:"2030",placeholder:"Enter year"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Day"}),e.jsx("input",{type:"number",min:"1",max:_e(x.year,x.month),value:x.date,onChange:t=>j(r=>({...r,date:parseInt(t.target.value)})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time"}),e.jsx("input",{type:"time",value:x.time,onChange:t=>j(r=>({...r,time:t.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{value:x.category||"",onChange:t=>j(r=>({...r,category:t.target.value,type:ue[t.target.value]?.type||"Custom"})),className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"blogPosts",children:"Blog Posts"}),e.jsx("option",{value:"socialMedia",children:"Social Media"}),e.jsx("option",{value:"campaigns",children:"Campaigns"}),e.jsx("option",{value:"emailMarketing",children:"Email Marketing"}),T.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx("button",{onClick:()=>Q(!ce),className:"px-3 py-2 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200 text-sm",title:"Add custom category",children:"+"})]}),ce&&e.jsxs("div",{className:"mt-2 flex space-x-2",children:[e.jsx("input",{type:"text",value:$,onChange:t=>Z(t.target.value),placeholder:"New category name",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:t=>t.key==="Enter"&&ke()}),e.jsx("button",{onClick:ke,className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Add"}),e.jsx("button",{onClick:()=>{Q(!1),Z("")},className:"px-3 py-2 bg-gray-300 text-gray-600 rounded-md hover:bg-gray-400 text-sm",children:"Cancel"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assignee"}),e.jsxs("select",{value:x.assignee||"",onChange:t=>j(r=>({...r,assignee:t.target.value?parseInt(t.target.value):null})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Assignee"}),A.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created by"}),e.jsxs("select",{value:x.created_by||"",onChange:t=>j(r=>({...r,created_by:t.target.value?parseInt(t.target.value):null})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Created by"}),A.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{value:x.priority,onChange:t=>j(r=>({...r,priority:t.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"low",children:"🟢 Low"}),e.jsx("option",{value:"medium",children:"🟡 Medium"}),e.jsx("option",{value:"high",children:"🔴 High"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recurring"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"is_recurring",checked:x.is_recurring,onChange:t=>j(r=>({...r,is_recurring:t.target.checked,recurring_pattern:t.target.checked?r.recurring_pattern||"weekly":"",recurring_end_date:t.target.checked?r.recurring_end_date:null})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_recurring",className:"text-sm text-gray-700",children:"Make this task recurring"})]}),x.is_recurring&&e.jsxs("div",{className:"ml-6 space-y-3 border-l-2 border-gray-200 pl-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Repeat every"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",min:"1",max:"99",value:x.recurring_interval,onChange:t=>j(r=>({...r,recurring_interval:parseInt(t.target.value)||1})),className:"w-16 border border-gray-300 rounded-md px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("select",{value:x.recurring_unit,onChange:t=>j(r=>({...r,recurring_unit:t.target.value})),className:"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"day",children:"day(s)"}),e.jsx("option",{value:"week",children:"week(s)"}),e.jsx("option",{value:"month",children:"month(s)"}),e.jsx("option",{value:"year",children:"year(s)"}),e.jsx("option",{value:"first_day_of_month",children:"first [day] of month"}),e.jsx("option",{value:"2nd_day_of_month",children:"2nd [day] of month"}),e.jsx("option",{value:"3rd_day_of_month",children:"3rd [day] of month"}),e.jsx("option",{value:"4th_day_of_month",children:"4th [day] of month"}),e.jsx("option",{value:"last_day_of_month",children:"last [day] of month"})]})]})]}),x.recurring_unit==="week"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Repeat on days"}),e.jsx("div",{className:"flex space-x-1",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((t,r)=>e.jsx("button",{type:"button",onClick:()=>{const s=x.recurring_days||[],u=s.includes(r)?s.filter(g=>g!==r):[...s,r];j(g=>({...g,recurring_days:u}))},className:`w-8 h-8 rounded-full text-xs font-medium ${(x.recurring_days||[]).includes(r)?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:t[0]},t))})]}),(x.recurring_unit==="first_day_of_month"||x.recurring_unit==="2nd_day_of_month"||x.recurring_unit==="3rd_day_of_month"||x.recurring_unit==="4th_day_of_month"||x.recurring_unit==="last_day_of_month")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Select day of week"}),e.jsx("div",{className:"flex space-x-1",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((t,r)=>e.jsx("button",{type:"button",onClick:()=>{j(s=>({...s,recurring_days:[r]}))},className:`w-8 h-8 rounded-full text-xs font-medium ${(x.recurring_days||[]).includes(r)?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:t[0]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"End date (optional)"}),e.jsx("input",{type:"date",value:x.recurring_end_date||"",onChange:t=>j(r=>({...r,recurring_end_date:t.target.value||null})),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",min:new Date().toISOString().split("T")[0]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for no end date"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes or comments"}),e.jsx("textarea",{value:x.comments,onChange:t=>j(r=>({...r,comments:t.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Add any additional notes or comments..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),e.jsx("input",{type:"text",value:x.tags?.join(", ")||"",onChange:t=>j(r=>({...r,tags:t.target.value?t.target.value.split(",").map(s=>s.trim()).filter(s=>s):[]})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter tags separated by commas (e.g., urgent, q4, marketing)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple tags with commas"})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>C(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:Qe,disabled:!x.title.trim(),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Task"})]})]})}),l&&i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>v(!1),children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-[800px] max-w-[95vw] mx-4 max-h-[90vh] overflow-y-auto",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Task Details"}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(he,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:i.title}),e.jsx("p",{className:"text-gray-600 text-sm",children:i.description})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"TYPE"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${i.color}`,children:i.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"STATUS"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded capitalize ${i.status==="completed"?"bg-blue-100 text-blue-800":i.status==="in-progress"?"bg-yellow-100 text-yellow-800":i.status==="review"?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:i.status.replace("-"," ")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"PRIORITY"}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded ${le[i.priority]?.color||le.medium.color}`,children:[le[i.priority]?.icon||"🟡"," ",le[i.priority]?.label||"Medium"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"ASSIGNED TO"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-6 h-6 ${A.find(t=>t.id===i.assignee)?.color} rounded-full flex items-center justify-center text-white text-xs`,children:A.find(t=>t.id===i.assignee)?.avatar}),e.jsx("span",{className:"text-sm text-gray-900",children:te(i.assignee)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"DUE DATE"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Re,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-900",children:[ee[i.month||d.getMonth()]," ",i.date,", ",i.year||d.getFullYear()]}),i.time&&e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4 text-gray-400 ml-4"}),e.jsx("span",{className:"text-sm text-gray-900",children:i.time})]})]})]}),i.comments&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"COMMENTS"}),e.jsx("div",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md",children:i.comments})]}),i.tags&&i.tags.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-2",children:"TAGS"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.tags.map((t,r)=>e.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full",children:t},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"CREATED"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:i.created_at?new Date(i.created_at).toLocaleDateString():"Unknown date"}),i.created_at&&e.jsxs("span",{className:"text-sm text-gray-500",children:["at ",new Date(i.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),i.created_by&&e.jsxs("span",{className:"text-sm text-gray-600",children:["by ",te(i.created_by)]})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[i.is_recurring||i.is_recurring_instance?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>pe(!1),className:"px-4 py-2 border border-orange-300 text-orange-700 rounded-md hover:bg-orange-50",children:"Delete This One"}),e.jsx("button",{onClick:()=>pe(!0),className:"px-4 py-2 border border-red-300 text-red-700 rounded-md hover:bg-red-50",children:"Delete All"}),e.jsx("button",{onClick:()=>et(),className:"px-4 py-2 border border-blue-300 text-blue-700 rounded-md hover:bg-blue-50",children:"Edit Recurring Task"})]}):e.jsx("button",{onClick:()=>pe(),className:"px-4 py-2 border border-red-300 text-red-700 rounded-md hover:bg-red-50",children:"Delete"}),e.jsx("button",{onClick:tt,className:"px-4 py-2 border border-green-300 text-green-700 rounded-md hover:bg-green-50",children:"Duplicate"}),e.jsx("button",{onClick:()=>v(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Close"}),e.jsx("button",{onClick:Ze,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Edit Task"})]})]})}),V&&o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-[800px] max-w-[95vw] mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Task"}),e.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(he,{className:"w-5 h-5"})})]}),(o.is_recurring||o.is_recurring_instance)&&e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Edit Mode"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"editMode",value:"single",checked:ye==="single",onChange:t=>de(t.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Edit this occurrence only (other occurrences will remain unchanged)"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"editMode",value:"all",checked:ye==="all",onChange:t=>de(t.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Edit all occurrences of this recurring task"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:o.title,onChange:t=>f(r=>({...r,title:t.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter task title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:o.description,onChange:t=>f(r=>({...r,description:t.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter task description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Month"}),e.jsx("select",{value:o.month,onChange:t=>f(r=>({...r,month:parseInt(t.target.value)})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:ee.map((t,r)=>e.jsx("option",{value:r,children:t},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"}),e.jsx("input",{type:"number",value:o.year,onChange:t=>f(r=>({...r,year:parseInt(t.target.value)||new Date().getFullYear()})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2020",max:"2030",placeholder:"Enter year"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Day"}),e.jsx("input",{type:"number",min:"1",max:_e(o.year,o.month),value:o.date,onChange:t=>f(r=>({...r,date:parseInt(t.target.value)})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time"}),e.jsx("input",{type:"time",value:o.time,onChange:t=>f(r=>({...r,time:t.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:o.category,onChange:t=>f(r=>({...r,category:t.target.value,type:ue[t.target.value].type})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"blogPosts",children:"Blog Posts"}),e.jsx("option",{value:"socialMedia",children:"Social Media"}),e.jsx("option",{value:"campaigns",children:"Campaigns"}),e.jsx("option",{value:"emailMarketing",children:"Email Marketing"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assignee"}),e.jsx("select",{value:o.assignee,onChange:t=>f(r=>({...r,assignee:parseInt(t.target.value)})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:A.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:o.status,onChange:t=>f(r=>({...r,status:t.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"planned",children:"Planned"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{value:o.priority||"medium",onChange:t=>f(r=>({...r,priority:t.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"low",children:"🟢 Low"}),e.jsx("option",{value:"medium",children:"🟡 Medium"}),e.jsx("option",{value:"high",children:"🔴 High"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recurring"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"edit_is_recurring",checked:o.is_recurring||!1,onChange:t=>f(r=>({...r,is_recurring:t.target.checked,recurring_pattern:t.target.checked?r.recurring_pattern||"weekly":"",recurring_end_date:t.target.checked?r.recurring_end_date:null})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"edit_is_recurring",className:"text-sm text-gray-700",children:"Make this task recurring"})]}),(o.is_recurring||!1)&&e.jsxs("div",{className:"ml-6 space-y-3 border-l-2 border-gray-200 pl-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Repeat every"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",min:"1",max:"99",value:o.recurring_interval||1,onChange:t=>f(r=>({...r,recurring_interval:parseInt(t.target.value)||1})),className:"w-16 border border-gray-300 rounded-md px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("select",{value:o.recurring_unit||"week",onChange:t=>f(r=>({...r,recurring_unit:t.target.value})),className:"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"day",children:"day(s)"}),e.jsx("option",{value:"week",children:"week(s)"}),e.jsx("option",{value:"month",children:"month(s)"}),e.jsx("option",{value:"year",children:"year(s)"}),e.jsx("option",{value:"first_day_of_month",children:"first [day] of month"}),e.jsx("option",{value:"2nd_day_of_month",children:"2nd [day] of month"}),e.jsx("option",{value:"3rd_day_of_month",children:"3rd [day] of month"}),e.jsx("option",{value:"4th_day_of_month",children:"4th [day] of month"}),e.jsx("option",{value:"last_day_of_month",children:"last [day] of month"})]})]})]}),(o.recurring_unit||"week")==="week"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Repeat on days"}),e.jsx("div",{className:"flex space-x-1",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((t,r)=>e.jsx("button",{type:"button",onClick:()=>{const s=o.recurring_days||[],u=s.includes(r)?s.filter(g=>g!==r):[...s,r];f(g=>({...g,recurring_days:u}))},className:`w-8 h-8 rounded-full text-xs font-medium ${(o.recurring_days||[]).includes(r)?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:t[0]},t))})]}),((o.recurring_unit||"week")==="first_day_of_month"||(o.recurring_unit||"week")==="2nd_day_of_month"||(o.recurring_unit||"week")==="3rd_day_of_month"||(o.recurring_unit||"week")==="4th_day_of_month"||(o.recurring_unit||"week")==="last_day_of_month")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Select day of week"}),e.jsx("div",{className:"flex space-x-1",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((t,r)=>e.jsx("button",{type:"button",onClick:()=>{f(s=>({...s,recurring_days:[r]}))},className:`w-8 h-8 rounded-full text-xs font-medium ${(o.recurring_days||[]).includes(r)?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:t[0]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"End date (optional)"}),e.jsx("input",{type:"date",value:o.recurring_end_date||"",onChange:t=>f(r=>({...r,recurring_end_date:t.target.value||null})),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",min:new Date().toISOString().split("T")[0]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for no end date"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes or comments"}),e.jsx("textarea",{value:o.comments||"",onChange:t=>f(r=>({...r,comments:t.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Add any additional notes or comments..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),e.jsx("input",{type:"text",value:o.tags?.join(", ")||"",onChange:t=>f(r=>({...r,tags:t.target.value?t.target.value.split(",").map(s=>s.trim()).filter(s=>s):[]})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter tags separated by commas (e.g., urgent, q4, marketing)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple tags with commas"})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-200",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"CREATED"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:o.created_at?new Date(o.created_at).toLocaleDateString():"Unknown date"}),o.created_at&&e.jsxs("span",{className:"text-sm text-gray-500",children:["at ",new Date(o.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),o.created_by&&e.jsxs("span",{className:"text-sm text-gray-600",children:["by ",te(o.created_by)]})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:nt,disabled:!o.title.trim(),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Changes"})]})]})})]})},Ot=()=>e.jsx(Rt,{});_t.createRoot(document.getElementById("root")).render(e.jsx(ft.StrictMode,{children:e.jsx(Ot,{})}));
